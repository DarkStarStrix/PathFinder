<!DOCTYPE html>
<html lang="eng">
<head>
    <title>Pathfinder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <style>
    body {
        display: flex; /* Display the content as a flex container */
        justify-content: center; /* Center the content horizontally */
        align-items: center; /* Center the content vertically */
        height: 100vh; /* Set the height of the body to 100% of the viewport height */
        background-color: #f5f5f5; /* Light gray background */
    }
    #canvasContainer {
        position: relative; /* Set the position of the canvas container */
        width: 500px; /* Set the dimensions of the canvas container */
        height: 500px; /* Set the dimensions of the canvas container */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Add shadow to the canvas container */
        border: 3px solid black; /* Add border */
        overflow: visible; /* Hide the overflow */
    }
    #myCanvas {
        width: 500px; /* Set the dimensions of the canvas */
        height: 500px;
    }
    .btn {
        position: relative;
        /* Position the button at the top of the page */
        top: -270px; /* Move the button down */
        left: 160px; /* Move the button 20px to the right */
        background-color: #ff4081; /* Vibrant pink button */
        color: white; /* White text */
        border: 2px solid black; /* Black border */
        padding: 10px 20px; /* Add padding */
        border-radius: 5px; /* Rounded corners */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Add shadow */
        cursor: pointer; /* Change cursor on hover */
        /* Center the text */
        display: flex;
        justify-content: center; /* Center horizontally */
        align-items: center; /* Center vertically */
    }
    #loading {
    display: none; /* Hide the loading sign by default */
    position: absolute; /* Set the position of the loading sign */
    top: 50%; /* Center the loading sign vertically */
    left: 50%; /* Center the loading sign horizontally */
    transform: translate(-50%, -50%); /* Center the loading sign */
    }
</style>
</head>
    <body>
    <button class="btn waves-effect waves-light" onclick="runPathfinder()">Run Pathfinder</button>
    <div id="canvasContainer">
        <canvas id="myCanvas" width="500" height="500"></canvas>
        <div id="loading">
            <div class="preloader-wrapper big active">
                <div class="spinner-layer spinner-blue-only">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="gap-patch">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
    <script>
      function runPathfinder() {
           let canvas = document.getElementById('myCanvas');
           let ctx = canvas.getContext('2d');
           ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas

           document.getElementById('loading').style.display = 'flex'; // Display the loading sign

        fetch('/run-pathfinder')
            .then(response => response.blob())
            .then(blob => {
                let url = URL.createObjectURL(blob);
                let img = new Image();
                img.onload = function() {
                    // Set the dimensions of the canvas to match the image
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height); // Draw the image on the canvas
                  };
            img.src = url;
        })
        .finally(() => {
            document.getElementById('loading').style.display = 'none'; // Hide the loading sign
        });
}
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</html>
